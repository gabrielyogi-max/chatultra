<!DOCTYPE html>
<html lang="pt-br" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NEXUS // INTELLIGENCE</title>
    <!-- Dependencies -->
    <!-- Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark-reasonable.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bgDeep: '#030305',
                        accentPrimary: '#6366f1', // Indigo
                        accentSecondary: '#a855f7', // Purple
                        accentTertiary: '#ec4899', // Pink
                        glassBorder: 'rgba(255, 255, 255, 0.08)',
                        glassHighlight: 'rgba(255, 255, 255, 0.05)',
                        textPrimary: '#f1f5f9',
                        textSecondary: '#94a3b8',
                        textTertiary: '#64748b',
                        success: '#10b981',
                        danger: '#f43f5e',
                    },
                    fontFamily: {
                        ui: ['Inter', 'sans-serif'],
                        code: ['JetBrains Mono', 'monospace'],
                    },
                    borderRadius: {
                        'xl': '24px',
                        'lg': '18px',
                        'md': '12px',
                        'sm': '8px',
                    },
                    boxShadow: {
                        'glow': '0 0 30px rgba(99, 102, 241, 0.15)',
                        'logo': '0 4px 12px rgba(99, 102, 241, 0.3)',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-bgDeep text-textPrimary font-ui flex justify-center items-center h-full m-0 overflow-hidden text-[15px] leading-relaxed selection:bg-accentPrimary selection:text-white">

<!-- ICONS (Lucide Style) -->
<svg style="display: none;">
    <symbol id="icon-cpu" viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"/><rect x="9" y="9" width="6" height="6"/><line x1="9" y1="1" x2="9" y2="4"/><line x1="15" y1="1" x2="15" y2="4"/><line x1="9" y1="20" x2="9" y2="23"/><line x1="15" y1="20" x2="15" y2="23"/><line x1="20" y1="9" x2="23" y2="9"/><line x1="20" y1="14" x2="23" y2="14"/><line x1="1" y1="9" x2="4" y2="9"/><line x1="1" y1="14" x2="4" y2="14"/></symbol>
    <symbol id="icon-download" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></symbol>
    <symbol id="icon-trash" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></symbol>
    <symbol id="icon-volume-2" viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/></symbol>
    <symbol id="icon-volume-x" viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></symbol>
    <symbol id="icon-paperclip" viewBox="0 0 24 24"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/></symbol>
    <symbol id="icon-mic" viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></symbol>
    <symbol id="icon-copy" viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></symbol>
    <symbol id="icon-send" viewBox="0 0 24 24"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></symbol>
    <symbol id="icon-check" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></symbol>
</svg>

<!-- Background Gradients -->
<div class="fixed inset-0 pointer-events-none z-0">
    <div class="absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_0%_0%,rgba(99,102,241,0.15),transparent_40%)]"></div>
    <div class="absolute bottom-0 right-0 w-full h-full bg-[radial-gradient(circle_at_100%_100%,rgba(168,85,247,0.15),transparent_40%)]"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[radial-gradient(circle_at_50%_50%,rgba(255,255,255,0.02),transparent_60%)]"></div>
</div>

<!-- Main Container -->
<div class="relative z-10 w-full h-full md:w-[95%] md:max-w-[1400px] md:h-[94vh] md:rounded-xl md:border md:border-glassBorder md:shadow-lg flex flex-col overflow-hidden glass-panel bg-opacity-30">
    
    <!-- HEADER -->
    <header class="px-7 h-[72px] flex items-center justify-between border-b border-glassBorder bg-[rgba(5,5,8,0.3)] shrink-0">
        <div class="font-semibold text-[1.15rem] text-textPrimary flex items-center gap-3.5 tracking-tight">
            <div class="w-9 h-9 bg-gradient-to-br from-accentPrimary to-accentSecondary rounded-[10px] flex items-center justify-center shadow-logo relative overflow-hidden group">
                <div class="absolute inset-0 bg-gradient-to-br from-white/20 to-transparent pointer-events-none"></div>
                <svg class="w-5 h-5 stroke-white z-10"><use href="#icon-cpu"/></svg>
            </div>
            <span>NEXUS <span class="opacity-50 font-normal">// INTELLIGENCE</span></span>
        </div>
        
        <div class="flex gap-4 items-center">
            <div class="text-[0.7rem] text-textTertiary flex gap-4 font-code items-center">
                <span id="status-visual" class="flex items-center gap-1.5"><span class="w-2 h-2 rounded-full bg-success shadow-[0_0_8px_rgba(16,185,129,0.4)]"></span> SYSTEM ONLINE</span>
            </div>
        </div>
    </header>

    <!-- TOOLBAR -->
    <div class="px-7 py-3 flex gap-4 items-center border-b border-glassBorder bg-white/1 overflow-x-auto shrink-0 no-scrollbar">
        <div class="relative min-w-[280px] grow max-w-[450px]">
            <select id="modelSelector" class="w-full bg-black/25 border border-glassBorder text-textPrimary py-3 pl-4 pr-10 rounded-md font-ui text-[0.9rem] cursor-pointer appearance-none transition-all duration-200 hover:bg-white/5 hover:border-white/15 focus:border-accentPrimary focus:ring-1 focus:ring-accentPrimary outline-none">
                <optgroup label="VISUAL CORE" class="bg-[#0f1014] text-textPrimary">
                    <option value="Cluster1|âœ¨ Google: Gemini 2.5 Flash Lite âš¡" class="bg-[#0f1014] p-2">Gemini 2.5 Flash Lite</option>
                    <option value="Cluster1|âœ¨ Google: Gemini 3.0 Pro (Experimental)" class="bg-[#0f1014] p-2">Gemini 3.0 Pro Preview</option>
                    <option value="Cluster1|âœ¨ Google: Gemini 2.5 Pro" class="bg-[#0f1014] p-2">Gemini 2.5 Pro</option>
                </optgroup>
                <optgroup label="MISTRAL AI" class="bg-[#0f1014] text-textPrimary">
                    <option value="Cluster1|ðŸ‡«ðŸ‡· Mistral: Magistral Medium 2509" class="bg-[#0f1014] p-2">Mistral Medium</option>
                    <option value="Cluster1|ðŸ‡«ðŸ‡· Mistral: Pixtral Large (Vision) ðŸ–¼ï¸" class="bg-[#0f1014] p-2">Pixtral Large (Vision)</option>
                    <option value="Cluster1|ðŸ‡«ðŸ‡· Mistral: Codestral 2508" class="bg-[#0f1014] p-2">Mistral Codestral</option>
                </optgroup>
                <optgroup label="LOGIC CORE" class="bg-[#0f1014] text-textPrimary">
                     <option value="Cluster2|ðŸš€ DeepSeek R1 Distill Qwen 7B (O Mais Inteligente - Novo!)" class="bg-[#0f1014] p-2">DeepSeek R1 (Reasoning)</option>
                     <option value="Cluster2|ðŸ³ DeepSeek Math 7B (Especialista Antigo)" class="bg-[#0f1014] p-2">DeepSeek Math</option>
                </optgroup>
            </select>
            <!-- Custom chevron -->
            <div class="absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none opacity-80">
                <svg width="10" height="6" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
            </div>
        </div>
        
        <button onclick="toggleSound()" id="soundBtn" class="bg-transparent border border-transparent text-textSecondary px-3.5 py-2 rounded-md cursor-pointer text-[0.85rem] font-medium flex items-center gap-2 transition-all duration-200 hover:bg-white/5 hover:border-white/5 hover:text-textPrimary" title="Sound Effects">
            <svg class="w-4 h-4 stroke-current stroke-[1.5] fill-none"><use href="#icon-volume-2" id="sndIconUse"/></svg>
        </button>
        <button onclick="exportChat()" class="bg-transparent border border-transparent text-textSecondary px-3.5 py-2 rounded-md cursor-pointer text-[0.85rem] font-medium flex items-center gap-2 transition-all duration-200 hover:bg-white/5 hover:border-white/5 hover:text-textPrimary" title="Export Chat">
            <svg class="w-4 h-4 stroke-current stroke-[1.5] fill-none"><use href="#icon-download"/></svg> Export
        </button>
        <button onclick="clearChat()" class="bg-transparent border border-transparent text-danger px-3.5 py-2 rounded-md cursor-pointer text-[0.85rem] font-medium flex items-center gap-2 transition-all duration-200 hover:bg-danger/10 hover:border-danger/10" title="Clear Chat">
            <svg class="w-4 h-4 stroke-current stroke-[1.5] fill-none"><use href="#icon-trash"/></svg> Clear
        </button>
    </div>

    <!-- CHAT AREA -->
    <div id="chat-history" class="flex-1 overflow-y-auto p-10 flex flex-col gap-8 scroll-smooth">
        <!-- JS will populate -->
    </div>

    <!-- INPUT -->
    <div class="p-7 bg-gradient-to-t from-[rgba(3,3,5,0.95)] to-[rgba(3,3,5,0)] relative shrink-0">
        <div class="bg-[rgba(25,25,30,0.6)] backdrop-blur-md border border-white/5 rounded-xl p-2.5 flex flex-col gap-3 shadow-lg transition-all duration-300 focus-within:bg-[rgba(30,30,35,0.8)] focus-within:border-accentPrimary/40 focus-within:shadow-[0_20px_50px_-10px_rgba(0,0,0,0.5),0_0_0_1px_rgba(99,102,241,0.1)] focus-within:-translate-y-0.5">
            
            <div id="imagePreviewContainer" class="hidden p-3 mx-2.5 bg-white/5 border border-glassBorder rounded-md items-center justify-between">
                <div class="flex items-center gap-2.5">
                    <img id="imagePreview" alt="Preview" class="h-12 rounded-md border border-white/10">
                    <span id="imageName" class="text-[0.8rem] text-textSecondary">image.png</span>
                </div>
                <button onclick="clearImage()" class="bg-transparent border-none text-textTertiary cursor-pointer hover:text-textPrimary text-xl leading-none">&times;</button>
            </div>

            <div class="flex items-end gap-3 px-2.5 pb-1.5">
                <input type="file" id="fileInput" accept="image/*" class="hidden" onchange="handleFileSelect(event)">
                
                <button class="w-[42px] h-[42px] rounded-xl border-none bg-transparent text-textSecondary cursor-pointer flex items-center justify-center transition-all duration-200 hover:bg-white/10 hover:text-white" onclick="document.getElementById('fileInput').click()" title="Attach File">
                    <svg class="w-5 h-5 stroke-current stroke-[1.5] fill-none"><use href="#icon-paperclip"/></svg>
                </button>
                
                <textarea id="userInput" placeholder="Ask Nexus..." onkeypress="handleEnter(event)" rows="1" class="grow bg-transparent border-none text-textPrimary font-ui text-[0.95rem] resize-none max-h-[200px] py-3.5 px-1 leading-normal placeholder-slate-400/50 outline-none"></textarea>
                
                <button id="micBtn" onclick="toggleVoice()" class="w-[42px] h-[42px] rounded-xl border-none bg-transparent text-textSecondary cursor-pointer flex items-center justify-center transition-all duration-200 hover:bg-white/10 hover:text-white [&.active]:text-danger [&.active]:bg-danger/10 [&.active]:shadow-[0_0_15px_rgba(244,63,94,0.2)]" title="Voice Input">
                    <svg class="w-5 h-5 stroke-current stroke-[1.5] fill-none"><use href="#icon-mic"/></svg>
                </button>

                <button id="sendBtn" class="h-[42px] px-7 bg-gradient-to-br from-accentPrimary to-accentSecondary border-none rounded-xl text-white font-semibold text-[0.9rem] cursor-pointer transition-all duration-300 shadow-[0_4px_15px_rgba(99,102,241,0.3)] flex items-center gap-2 hover:-translate-y-0.5 hover:shadow-[0_8px_25px_rgba(99,102,241,0.5)] hover:brightness-110 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none" onclick="sendMessage()">
                    <span>SEND</span> <svg class="w-3.5 h-3.5 stroke-current stroke-[1.5] fill-none"><use href="#icon-send"/></svg>
                </button>
            </div>
        </div>
    </div>
</div>

<script type="module" src="script.js"></script>

</body>
</html>

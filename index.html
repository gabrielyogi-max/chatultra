<!DOCTYPE html>
<html lang="pt-br" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NEXUS // INTELLIGENCE</title>
    
    <!-- Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark-reasonable.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bgDeep: '#050507',
                        accentPrimary: '#6366f1',
                        accentSecondary: '#a855f7',
                        textPrimary: '#f8fafc',
                        textSecondary: '#94a3b8',
                        textTertiary: '#64748b',
                    },
                    fontFamily: {
                        ui: ['Inter', 'sans-serif'],
                        code: ['JetBrains Mono', 'monospace'],
                    },
                    animation: {
                        'spin-slow': 'spin 3s linear infinite',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'slide-up': 'slideUpFade 0.5s ease-out forwards',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-bgDeep text-textPrimary font-ui flex justify-center items-center h-full m-0 overflow-hidden text-[15px] antialiased selection:bg-accentPrimary selection:text-white">

<!-- SVG Icons -->
<svg style="display: none;">
    <symbol id="icon-cpu" viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"/><rect x="9" y="9" width="6" height="6"/><line x1="9" y1="1" x2="9" y2="4"/><line x1="15" y1="1" x2="15" y2="4"/><line x1="9" y1="20" x2="9" y2="23"/><line x1="15" y1="20" x2="15" y2="23"/><line x1="20" y1="9" x2="23" y2="9"/><line x1="20" y1="14" x2="23" y2="14"/><line x1="1" y1="9" x2="4" y2="9"/><line x1="1" y1="14" x2="4" y2="14"/></symbol>
    <symbol id="icon-download" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></symbol>
    <symbol id="icon-trash" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></symbol>
    <symbol id="icon-volume-2" viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/></symbol>
    <symbol id="icon-volume-x" viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></symbol>
    <symbol id="icon-paperclip" viewBox="0 0 24 24"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/></symbol>
    <symbol id="icon-mic" viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></symbol>
    <symbol id="icon-copy" viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></symbol>
    <symbol id="icon-send" viewBox="0 0 24 24"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></symbol>
    <symbol id="icon-check" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"></polyline></symbol>
    <symbol id="icon-chevron-down" viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"></polyline></symbol>
</svg>

<!-- Ambient Background -->
<div class="fixed inset-0 pointer-events-none z-0 overflow-hidden">
    <div class="absolute -top-[10%] -left-[10%] w-[50%] h-[50%] bg-indigo-900/20 rounded-full blur-[120px] animate-blob"></div>
    <div class="absolute bottom-[0%] -right-[10%] w-[50%] h-[60%] bg-purple-900/20 rounded-full blur-[120px] animate-blob delay-2000"></div>
    <div class="absolute top-[30%] left-[40%] w-[40%] h-[40%] bg-blue-900/10 rounded-full blur-[100px] animate-blob delay-5000"></div>
    <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIj48ZyBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0wIDQwTDQwIDBIOjB2NDB6IiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9IjAuMDIiLz48L2c+PC9zdmc+')] opacity-20"></div>
</div>

<!-- Main App Container -->
<div class="relative z-10 w-full h-full md:w-[95%] md:max-w-[1600px] md:h-[95vh] md:rounded-2xl flex flex-col overflow-hidden glass-panel-deep shadow-2xl">
    
    <!-- HEADER -->
    <header class="h-16 px-6 md:px-8 flex items-center justify-between border-b border-white/[0.06] bg-black/20 shrink-0 backdrop-blur-sm z-20">
        <!-- Logo -->
        <div class="flex items-center gap-4">
            <div class="w-10 h-10 rounded-xl bg-gradient-to-tr from-indigo-600 to-purple-600 flex items-center justify-center shadow-[0_0_20px_rgba(99,102,241,0.4)] relative group overflow-hidden">
                <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-500 ease-out"></div>
                <svg class="w-5 h-5 stroke-white relative z-10 drop-shadow-md"><use href="#icon-cpu"/></svg>
            </div>
            <div class="flex flex-col">
                <span class="font-bold text-base tracking-wide text-white leading-none">NEXUS</span>
                <span class="text-[0.65rem] tracking-[0.2em] text-indigo-300 font-medium opacity-80 mt-1">INTELLIGENCE CORE</span>
            </div>
        </div>
        
        <!-- Status & Actions -->
        <div class="flex items-center gap-6">
            <div class="hidden md:flex items-center gap-2 bg-white/[0.03] px-3 py-1.5 rounded-full border border-white/[0.05]">
                <span class="relative flex h-2 w-2">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
                </span>
                <span class="text-[0.7rem] font-code font-medium text-emerald-400 tracking-wide">SYSTEM OPERATIONAL</span>
            </div>
        </div>
    </header>

    <!-- SUB-HEADER / TOOLBAR -->
    <div class="px-6 md:px-8 py-3 flex gap-4 items-center justify-between border-b border-white/[0.06] bg-white/[0.01] shrink-0 z-50">
        <!-- Custom Glass Dropdown -->
        <div class="relative w-full max-w-sm" id="customDropdown">
            <!-- Hidden Native Select (for Logic) -->
            <select id="modelSelector" class="hidden">
                <option value="Cluster1|âœ¨ Google: Gemini 2.5 Flash Lite âš¡">Gemini 2.5 Flash Lite</option>
                <option value="Cluster1|âœ¨ Google: Gemini 3.0 Pro (Experimental)">Gemini 3.0 Pro Preview</option>
                <option value="Cluster1|âœ¨ Google: Gemini 2.5 Pro">Gemini 2.5 Pro</option>
                <option value="Cluster1|ðŸ‡«ðŸ‡· Mistral: Magistral Medium 2509">Mistral Medium</option>
                <option value="Cluster1|ðŸ‡«ðŸ‡· Mistral: Pixtral Large (Vision) ðŸ–¼ï¸">Pixtral Large (Vision)</option>
                <option value="Cluster1|ðŸ‡«ðŸ‡· Mistral: Codestral 2508">Mistral Codestral</option>
                <option value="Cluster2|ðŸš€ DeepSeek R1 Distill Qwen 7B (O Mais Inteligente - Novo!)">DeepSeek R1 (Reasoning)</option>
                <option value="Cluster2|ðŸ³ DeepSeek Math 7B (Especialista Antigo)">DeepSeek Math</option>
            </select>

            <!-- Trigger Button -->
            <div onclick="toggleDropdown()" class="dropdown-trigger flex items-center justify-between w-full pl-4 pr-3 py-2.5 bg-black/40 border border-white/10 rounded-xl text-sm text-gray-200 transition-all hover:bg-white/5 hover:border-white/20 active:scale-[0.99]">
                <div class="flex items-center gap-2.5 overflow-hidden">
                    <div class="w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.6)]"></div>
                    <span id="selectedModelLabel" class="truncate font-medium">Gemini 2.5 Flash Lite</span>
                </div>
                <svg class="w-4 h-4 text-gray-500"><use href="#icon-chevron-down"/></svg>
            </div>

            <!-- Dropdown Menu -->
            <div id="dropdownMenu" class="dropdown-menu absolute top-full left-0 w-full mt-2 bg-[#121217] border border-white/10 rounded-xl shadow-[0_10px_40px_rgba(0,0,0,0.5)] overflow-hidden z-[100] max-h-[400px] overflow-y-auto">
                <div class="py-1">
                    <div class="px-3 py-2 text-[0.7rem] font-bold text-gray-500 uppercase tracking-wider">Visual Core (Google)</div>
                    <div onclick="selectModel('Cluster1|âœ¨ Google: Gemini 2.5 Flash Lite âš¡', 'Gemini 2.5 Flash Lite')" class="px-4 py-2.5 text-sm text-gray-300 hover:bg-white/5 hover:text-white cursor-pointer transition-colors flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-blue-500"></span> Gemini 2.5 Flash Lite
                    </div>
                    <div onclick="selectModel('Cluster1|âœ¨ Google: Gemini 3.0 Pro (Experimental)', 'Gemini 3.0 Pro Preview')" class="px-4 py-2.5 text-sm text-gray-300 hover:bg-white/5 hover:text-white cursor-pointer transition-colors flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-blue-400"></span> Gemini 3.0 Pro Preview
                    </div>
                    <div onclick="selectModel('Cluster1|âœ¨ Google: Gemini 2.5 Pro', 'Gemini 2.5 Pro')" class="px-4 py-2.5 text-sm text-gray-300 hover:bg-white/5 hover:text-white cursor-pointer transition-colors flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-blue-600"></span> Gemini 2.5 Pro
                    </div>

                    <div class="border-t border-white/5 my-1"></div>
                    <div class="px-3 py-2 text-[0.7rem] font-bold text-gray-500 uppercase tracking-wider">Mistral AI</div>
                    
                    <div onclick="selectModel('Cluster1|ðŸ‡«ðŸ‡· Mistral: Magistral Medium 2509', 'Mistral Medium')" class="px-4 py-2.5 text-sm text-gray-300 hover:bg-white/5 hover:text-white cursor-pointer transition-colors flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-orange-500"></span> Mistral Medium
                    </div>
                    <div onclick="selectModel('Cluster1|ðŸ‡«ðŸ‡· Mistral: Pixtral Large (Vision) ðŸ–¼ï¸', 'Pixtral Large (Vision)')" class="px-4 py-2.5 text-sm text-gray-300 hover:bg-white/5 hover:text-white cursor-pointer transition-colors flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-orange-400"></span> Pixtral Large (Vision)
                    </div>
                    <div onclick="selectModel('Cluster1|ðŸ‡«ðŸ‡· Mistral: Codestral 2508', 'Mistral Codestral')" class="px-4 py-2.5 text-sm text-gray-300 hover:bg-white/5 hover:text-white cursor-pointer transition-colors flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-amber-500"></span> Mistral Codestral
                    </div>

                    <div class="border-t border-white/5 my-1"></div>
                    <div class="px-3 py-2 text-[0.7rem] font-bold text-gray-500 uppercase tracking-wider">Logic Core</div>

                    <div onclick="selectModel('Cluster2|ðŸš€ DeepSeek R1 Distill Qwen 7B (O Mais Inteligente - Novo!)', 'DeepSeek R1 (Reasoning)')" class="px-4 py-2.5 text-sm text-gray-300 hover:bg-white/5 hover:text-white cursor-pointer transition-colors flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-purple-500"></span> DeepSeek R1 (Reasoning)
                    </div>
                    <div onclick="selectModel('Cluster2|ðŸ³ DeepSeek Math 7B (Especialista Antigo)', 'DeepSeek Math')" class="px-4 py-2.5 text-sm text-gray-300 hover:bg-white/5 hover:text-white cursor-pointer transition-colors flex items-center gap-2">
                        <span class="w-1 h-1 rounded-full bg-indigo-400"></span> DeepSeek Math
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="flex items-center gap-2">
            <button onclick="toggleSound()" id="soundBtn" class="p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors" title="Sound Effects">
                <svg class="w-4 h-4 stroke-current stroke-2 fill-none"><use href="#icon-volume-2" id="sndIconUse"/></svg>
            </button>
            <div class="w-px h-4 bg-white/10 mx-1"></div>
            <button onclick="exportChat()" class="p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors" title="Export">
                <svg class="w-4 h-4 stroke-current stroke-2 fill-none"><use href="#icon-download"/></svg>
            </button>
            <button onclick="clearChat()" class="p-2 text-rose-400 hover:text-rose-300 hover:bg-rose-500/10 rounded-lg transition-colors" title="Clear">
                <svg class="w-4 h-4 stroke-current stroke-2 fill-none"><use href="#icon-trash"/></svg>
            </button>
        </div>
    </div>

    <!-- CHAT AREA -->
    <div id="chat-history" class="flex-1 overflow-y-auto px-6 py-8 flex flex-col scroll-smooth">
        <div class="w-full max-w-4xl mx-auto flex flex-col gap-8 pb-4">
            <!-- Messages injected here -->
        </div>
    </div>

    <!-- FOOTER / INPUT -->
    <div class="relative z-20 shrink-0 pb-6 pt-2 px-4 md:px-0">
        <div class="w-full max-w-4xl mx-auto">
            <div class="input-dock rounded-2xl p-2">
                <!-- Image Preview -->
                <div id="imagePreviewContainer" class="hidden px-4 py-3 border-b border-white/5 flex items-center justify-between animate-slide-up">
                    <div class="flex items-center gap-3">
                        <div class="relative group">
                            <img id="imagePreview" alt="Preview" class="h-10 w-10 object-cover rounded-lg border border-white/10 shadow-sm">
                            <div class="absolute inset-0 bg-black/50 rounded-lg hidden group-hover:flex items-center justify-center">
                                <svg class="w-4 h-4 stroke-white"><use href="#icon-check"/></svg>
                            </div>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-xs font-semibold text-indigo-300">Image Attached</span>
                            <span id="imageName" class="text-[0.65rem] text-gray-500 truncate max-w-[150px]">filename.png</span>
                        </div>
                    </div>
                    <button onclick="clearImage()" class="text-gray-500 hover:text-white transition-colors">
                        <svg class="w-4 h-4 stroke-current stroke-2"><use href="#icon-trash"/></svg>
                    </button>
                </div>

                <!-- Input Controls -->
                <div class="flex items-end gap-2 p-1">
                    <input type="file" id="fileInput" accept="image/*" class="hidden" onchange="handleFileSelect(event)">
                    
                    <button class="w-10 h-10 rounded-xl flex items-center justify-center text-gray-400 hover:text-indigo-400 hover:bg-indigo-500/10 transition-all duration-200" onclick="document.getElementById('fileInput').click()" title="Attach">
                        <svg class="w-5 h-5 stroke-current stroke-2 fill-none"><use href="#icon-paperclip"/></svg>
                    </button>

                    <textarea id="userInput" placeholder="Ask Nexus Intelligence..." onkeypress="handleEnter(event)" rows="1" class="w-full bg-transparent border-0 text-gray-100 placeholder-gray-500 focus:ring-0 py-2.5 px-2 text-[0.95rem] resize-none max-h-[200px] leading-relaxed"></textarea>

                    <button id="micBtn" onclick="toggleVoice()" class="w-10 h-10 rounded-xl flex items-center justify-center text-gray-400 hover:text-rose-400 hover:bg-rose-500/10 transition-all duration-200 [&.active]:text-rose-500 [&.active]:animate-pulse" title="Voice">
                        <svg class="w-5 h-5 stroke-current stroke-2 fill-none"><use href="#icon-mic"/></svg>
                    </button>

                    <button id="sendBtn" class="h-10 px-6 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-semibold rounded-xl shadow-lg shadow-indigo-500/20 hover:shadow-indigo-500/40 transform hover:-translate-y-0.5 transition-all duration-200 flex items-center gap-2" onclick="sendMessage()">
                        <span>SEND</span>
                        <svg class="w-3.5 h-3.5 stroke-current stroke-2 fill-none"><use href="#icon-send"/></svg>
                    </button>
                </div>
            </div>
            <div class="text-center mt-3">
                 <p class="text-[0.65rem] text-gray-600 font-mono">NEXUS AI SYSTEMS v2.5.0 // SECURE CONNECTION ESTABLISHED</p>
            </div>
        </div>
    </div>
</div>

<script type="module" src="script.js"></script>

</body>
</html>
